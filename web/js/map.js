


let map = new maplibregl.Map({
    container: 'vessels-map',
    style: 'https://demotiles.maplibre.org/style.json',
    center: [-80, 20],
    zoom: 3
});



function generate_lines(popup_msg, coords) {
    return {
        'type': 'Feature',
        'properties': {
            'description': popup_msg
        },
        'geometry': {
            'type': 'LineString',
            'coordinates': coords
        }
    }
}


// id = UNIQUE string
// coords = array
// popup_msg = string
//! TODO: add JSDoc
function add_lines(geojson) {

    map.on('load', () => {

        // Add the line
        map.addSource('vessel_trajectory', {
            'type': 'geojson',
            'data': geojson
        });

        // Style the line
        map.addLayer({
            'id': 'vessel_trajectory',
            'type': 'line',
            'source': 'vessel_trajectory',
            'layout': {
                'line-join': 'round',
                'line-cap': 'round'
            },
            'paint': {
                'line-color': '#F00',
                'line-width': 2
            }
        });

    });

}



// https://maplibre.org/maplibre-gl-js/docs/examples/popup-on-click/
map.on('load', () => {
    map.on('click', 'vessel_trajectory', (e) => {
        new maplibregl.Popup()
            .setLngLat(e.lngLat)
            .setHTML(e.features[0].properties.description)
            .addTo(map);
    });

    map.on('mouseenter', 'vessel_trajectory', () => map.getCanvas().style.cursor = 'pointer' );
    map.on('mouseleave', 'vessel_trajectory', () => map.getCanvas().style.cursor = '' );
})





c = [
[-82.42866,27.921],
[-82.42863,27.92098],
[-82.42866,27.92101],
[-82.42866,27.921],
[-82.42866,27.92101],
[-82.42866,27.92099],
[-82.42864,27.921],
[-82.42869,27.921],
[-82.42865,27.92099],
[-82.42867,27.92099],
[-82.42867,27.921],
[-82.42866,27.92098],
[-82.42866,27.92102],
[-82.42865,27.921],
[-82.42867,27.92101],
[-82.42865,27.92098],
[-82.42866,27.92099],
[-82.42865,27.92098],
[-82.42865,27.921],
[-82.42865,27.92098],
[-82.42865,27.92099],
[-82.42866,27.92101],
[-82.42866,27.92097],
[-82.42866,27.921],
[-82.42865,27.921],
[-82.42864,27.92102],
[-82.42865,27.92101],
[-82.42865,27.92099],
[-82.42865,27.921],
[-82.42864,27.92099],
[-82.42863,27.92101],
[-82.42865,27.92102],
[-82.42865,27.921],
[-82.42865,27.92101],
[-82.42866,27.92099],
[-82.42867,27.921],
[-82.42869,27.92101],
[-82.42866,27.92101],
[-82.42867,27.92102],
[-82.42866,27.921],
[-82.42867,27.92099],
[-82.42866,27.92097],
[-82.42866,27.92099],
[-82.42868,27.92099],
[-82.42866,27.92099],
[-82.42867,27.921],
[-82.42867,27.92101],
[-82.42866,27.921],
[-82.42867,27.921],
[-82.42866,27.92099],
[-82.42866,27.92099],
[-82.42866,27.92099],
[-82.42867,27.92099],
[-82.42867,27.92102],
[-82.42866,27.92099],
[-82.42867,27.92099],
[-82.42866,27.921],
[-82.42864,27.92098],
[-82.42865,27.92098],
[-82.42865,27.92099],
[-82.42865,27.92097],
[-82.42865,27.921],
[-82.42863,27.92101],
[-82.42865,27.92101],
[-82.42866,27.92101],
[-82.42865,27.92102],
[-82.42867,27.921],
[-82.42864,27.92101],
[-82.42865,27.92102],
[-82.42867,27.92099],
[-82.42866,27.92104],
[-82.42866,27.92103],
[-82.42865,27.92101],
[-82.42867,27.92101],
[-82.42865,27.92101],
[-82.42866,27.92102],
[-82.42866,27.92102],
[-82.42866,27.92101],
[-82.42868,27.92099],
[-82.42865,27.92099],
[-82.42866,27.92099],
[-82.42866,27.921],
[-82.42867,27.921],
[-82.42867,27.921],
[-82.42868,27.92102],
[-82.42866,27.92099],
[-82.42868,27.921],
[-82.42866,27.92098],
[-82.42866,27.92099],
[-82.42866,27.92101],
[-82.42867,27.92099],
[-82.42867,27.92101],
[-82.42867,27.92101],
[-82.42866,27.92102],
[-82.42865,27.92097],
[-82.42866,27.92101],
[-82.42866,27.92099],
[-82.42866,27.92099],
[-82.42866,27.92099],
[-82.42866,27.92098],
[-82.42867,27.92101],
[-82.42867,27.92101],
[-82.42868,27.92101],
[-82.42867,27.92101],
[-82.42866,27.92101],
[-82.42865,27.921],
[-82.42864,27.92101],
[-82.42865,27.92104],
[-82.42867,27.92103],
[-82.42867,27.92101],
[-82.42867,27.921],
[-82.42866,27.92097],
[-82.42866,27.921],
[-82.42864,27.92105],
[-82.42866,27.92102],
[-82.42866,27.92101],
[-82.42867,27.92098],
[-82.42866,27.921],
[-82.42866,27.921],
[-82.42865,27.92101],
[-82.42866,27.92099],
[-82.42848,27.92101],
[-82.43073,27.90699],
[-82.44188,27.87321],
[-82.44645,27.82833],
[-82.48016,27.79848],
[-82.52245,27.77887],
[-82.53061,27.73572],
[-82.55521,27.69614],
[-82.59315,27.67088],
[-82.62389,27.63586],
[-82.66702,27.61512],
[-82.71459,27.60714],
[-82.76107,27.60825],
[-82.80883,27.60904],
[-82.85901,27.60433],
[-82.91119,27.59899],
[-82.96672,27.59341],
[-83.02354,27.59332],
[-83.07821,27.59658],
[-83.1357,27.59881],
[-83.19389,27.59783],
[-83.25279,27.59774],
[-83.31037,27.59767],
[-83.36864,27.59768],
[-83.42569,27.59765],
[-83.48601,27.59797],
[-83.5478,27.59812],
[-83.60245,27.59779],
[-83.66101,27.5976],
[-83.72054,27.59772],
[-83.78702,27.59924],
[-83.84655,27.59982],
[-83.92636,27.59997],
[-84.09302,27.59986],
[-84.48213,27.60939],
[-84.60514,27.60833],
[-84.77323,27.62288],
[-84.86874,27.63843],
[-85.0061,27.66117],
[-85.06896,27.67197],
[-85.15448,27.68567],
[-85.24288,27.69941],
[-85.31867,27.7113],
[-85.40951,27.72722],
[-85.943,27.82143],
[-86.11969,27.84752],
[-86.25977,27.86788],
[-86.3771,27.88787],
[-86.50641,27.91211],
[-86.72004,27.95144],
[-86.96474,27.98891],
[-87.07083,28.00487],
[-87.16467,28.02053],
[-87.26838,28.03807],
[-87.40695,28.06299],
[-87.51265,28.08115],
[-87.77777,28.12622],
[-87.86151,28.13901],
[-87.93512,28.15086],
[-88.00701,28.16274],
[-88.08308,28.17534],
[-88.14647,28.18576],
[-88.20607,28.19571],
[-88.28567,28.20826],
[-88.35557,28.22014],
[-88.43207,28.23318],
[-88.50707,28.24645],
[-88.62171,28.26753],
[-88.83077,28.30333],
[-88.98766,28.34534],
[-89.04478,28.36694],
[-89.06412,28.38],
[-89.10346,28.42213],
[-89.14934,28.47109],
[-89.18492,28.50729],
[-89.2201,28.54406],
[-89.25264,28.58062],
[-89.28106,28.61857],
[-89.30841,28.65353],
[-89.31773,28.67199],
[-89.31282,28.67699],
[-89.30421,28.68222],
[-89.29225,28.68359],
[-89.28378,28.68453],
[-89.30459,28.69804],
[-89.33616,28.72563],
[-89.36567,28.75617],
[-89.3946,28.787],
[-89.41598,28.82294],
[-89.41737,28.85606],
[-89.43031,28.88591],
[-89.42442,28.91233],
[-89.39839,28.94979],
[-89.36909,28.98461],
[-89.34315,29.01681],
[-89.31911,29.04477],
[-89.29115,29.07607],
[-89.26723,29.11541],
[-89.25536,29.15876],
[-89.27068,29.19703],
[-89.29601,29.23041],
[-89.33037,29.25932],
[-89.36038,29.29248],
[-89.38669,29.32648],
[-89.4222,29.35563],
[-89.46245,29.35596],
[-89.49944,29.35136],
[-89.53949,29.36388],
[-89.57863,29.3791],
[-89.60479,29.40965],
[-89.60119,29.44772],
[-89.64185,29.4588],
[-89.68085,29.4751],
[-89.7086,29.5038],
[-89.7403,29.52834],
[-89.76998,29.55287],
[-89.80309,29.57637],
[-89.83784,29.59764],
[-89.87459,29.60799],
[-89.8992,29.61795],
[-89.92672,29.63549],
[-89.95539,29.65497],
[-89.96685,29.68466],
[-89.98465,29.71326],
[-90.00859,29.74215],
[-90.02044,29.77237],
[-90.00438,29.80749],
[-89.98522,29.84159],
[-89.97345,29.8772],
[-89.93812,29.8721],
[-89.90608,29.87222],
[-89.91089,29.90578],
[-89.94653,29.92316],
[-89.98808,29.93117],
[-90.02346,29.95128],
[-90.05808,29.95194],
[-90.0673,29.92262],
[-90.08642,29.91617],
[-90.08696,29.91614],
[-90.08696,29.91647],
[-90.08696,29.91647],
[-90.08697,29.91646],
[-90.08696,29.91647],
[-90.08697,29.91646],
[-90.08698,29.91646],
[-90.087,29.91647],
[-90.08697,29.91645],
[-90.08697,29.91645],
[-90.08694,29.91648],
[-90.08697,29.91646],
[-90.08696,29.91646],
[-90.08698,29.91644],
[-90.08696,29.91648],
[-90.08694,29.91646],
[-90.08696,29.91646],
[-90.08694,29.91646],
[-90.08697,29.91643],
[-90.08696,29.91645],
[-90.08697,29.91645],
[-90.08697,29.91646],
[-90.08697,29.91646],
[-90.08692,29.91645],
[-90.08696,29.91645],
[-90.08695,29.91647],
[-90.08694,29.91646],
[-90.08698,29.91646],
[-90.08697,29.91649],
[-90.08695,29.91646],
[-90.08696,29.91646],
[-90.08697,29.91645],
[-90.08697,29.91644],
[-90.08701,29.91643],
[-90.08695,29.91647],
[-90.08701,29.91645],
[-90.08698,29.91644],
[-90.08696,29.91645],
[-90.08695,29.91647],
[-90.08694,29.91646],
[-90.08692,29.9165],
[-90.08697,29.91644],
[-90.08696,29.91646],
[-90.08698,29.91646],
[-90.08699,29.91646],
[-90.08695,29.91648],
[-90.08696,29.91645],
[-90.08697,29.91646],
[-90.08699,29.91646],
[-90.08698,29.91646],
[-90.08697,29.91645],
[-90.08697,29.91646],
[-90.08697,29.91645],
[-90.08696,29.91646],
[-90.08696,29.91645],
[-90.08697,29.91645],
[-90.08697,29.91646],
[-90.08697,29.91644],
[-90.08697,29.91644],
[-90.08697,29.91645],
[-90.08697,29.91645],
[-90.08698,29.91644],
[-90.08698,29.91644],
[-90.08698,29.91644],
[-90.08699,29.91645],
[-90.08697,29.91645],
[-90.08697,29.91645],
[-90.08698,29.91645],
[-90.08698,29.91645],
[-90.08696,29.91646],
[-90.08697,29.91645],
[-90.08698,29.91645],
[-90.08697,29.91646],
[-90.08697,29.91647],
[-90.08695,29.91646],
[-90.08697,29.91643],
[-90.08693,29.91648],
[-90.08695,29.91648],
[-90.08697,29.91645],
[-90.08698,29.91645],
[-90.08696,29.91646],
[-90.08696,29.91646],
[-90.08696,29.91647],
[-90.08697,29.91647],
[-90.08698,29.91646],
[-90.08697,29.91646],
[-90.08698,29.91648],
[-90.08695,29.91647],
[-90.08697,29.91647],
[-90.08699,29.91645],
[-90.08699,29.91645],
[-90.08695,29.91646],
[-90.08695,29.91645],
[-90.08696,29.91644],
[-90.08697,29.91649],
[-90.08702,29.91645],
[-90.08696,29.91647],
[-90.08697,29.91645],
[-90.08697,29.91646],
[-90.08697,29.91646],
[-90.08697,29.91646],
[-90.08694,29.91646],
[-90.08696,29.91645],
[-90.08695,29.91646],
[-90.08695,29.91647],
[-90.08696,29.91645],
[-90.087,29.91644],
[-90.08699,29.91645],
[-90.08696,29.91644],
[-90.08696,29.91646],
[-90.08697,29.91646],
[-90.08696,29.91646],
[-90.08697,29.91646],
[-90.08697,29.91646],
[-90.08697,29.91645],
[-90.087,29.91646],
[-90.087,29.91643],
[-90.08697,29.91645],
[-90.08697,29.91644],
[-90.08697,29.91645],
[-90.08698,29.91646],
[-90.08698,29.91645],
[-90.08695,29.91646],
[-90.08696,29.91645],
[-90.08696,29.91647],
[-90.08697,29.91646],
]

add_lines(generate_lines('hello world', c))
